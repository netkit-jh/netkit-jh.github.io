<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Netkit-JH Docs Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Netkit-JH Docs Blog Atom Feed"><title data-react-helmet="true">Adding New Configuration Options to netkit.conf | Netkit-JH Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Adding New Configuration Options to netkit.conf | Netkit-JH Docs"><meta data-react-helmet="true" name="description" content="When adding new configuration options to netkit.conf, adding the configuration option to netkit.conf is not sufficient. You must also add additional scripting to support updating user&#x27;s existing configurations on reinstall."><meta data-react-helmet="true" property="og:description" content="When adding new configuration options to netkit.conf, adding the configuration option to netkit.conf is not sufficient. You must also add additional scripting to support updating user&#x27;s existing configurations on reinstall."><meta data-react-helmet="true" property="og:url" content="https://netkit-jh.github.io/docs/dev/guides/addingnewconfigs"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://netkit-jh.github.io/docs/dev/guides/addingnewconfigs"><link rel="stylesheet" href="/styles.3ef87060.css">
<link rel="preload" href="/styles.dec56188.js" as="script">
<link rel="preload" href="/runtime~main.d53829c8.js" as="script">
<link rel="preload" href="/main.ff5f2e9f.js" as="script">
<link rel="preload" href="/2.8d0b0d7f.js" as="script">
<link rel="preload" href="/77.3f201193.js" as="script">
<link rel="preload" href="/78.5acc5d18.js" as="script">
<link rel="preload" href="/935f2afb.f24097cc.js" as="script">
<link rel="preload" href="/76.d48e4612.js" as="script">
<link rel="preload" href="/3ff4396f.14081895.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="netkit-jh-logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="netkit-jh-logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Netkit-JH Docs</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/dev/guides/addingnewconfigs">Next</a></li><li><a class="dropdown__link" href="/docs/1.0.0/">1.0.0</a></li></ul></div><a href="https://github.com/netkit-jh/netkit-jh-build" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="netkit-jh-logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="netkit-jh-logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Netkit-JH Docs</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/dev/guides/addingnewconfigs">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/1.0.0/">1.0.0</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/netkit-jh/netkit-jh-build" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Netkit</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/introduction">Introduction Lab</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/usingtmux">Using Tmux</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Development</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dev/gettingstarted">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dev/featuresinprogress">Upcoming Features</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dev/currentbugs">Bugs</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dev/guides/debianbuild">Building Netkit-JH</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dev/guides/dockerbuild">Building with Docker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dev/guides/tcpdump">Building TCPDump</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dev/guides/fspackages">Installing Additional Packages</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dev/guides/add_distro">Add a Distro</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dev/guides/kernelpatches">Creating Kernel Patches</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dev/guides/creatingtests">Creating Tests</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/dev/guides/addingnewconfigs">Adding Config Options</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Manpages</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">vm commands</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/man/netkit-manpage-vclean">vclean</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/man/netkit-manpage-vcommand">vcommand</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/man/netkit-manpage-vconfig">vconfig</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/man/netkit-manpage-vconnect">vconnect</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/man/netkit-manpage-vcrash">vcrash</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/man/netkit-manpage-vdump">vdump</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/man/netkit-manpage-vhalt">vhalt</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/man/netkit-manpage-vlist">vlist</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/man/netkit-manpage-vstart">vstart</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">lab commands</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/man/netkit-manpage-lclean">lclean</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/man/netkit-manpage-lcrash">lcrash</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/man/netkit-manpage-lhalt">lhalt</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/man/netkit-manpage-linfo">linfo</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/man/netkit-manpage-lrestart">lrestart</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/man/netkit-manpage-lstart">lstart</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/man/netkit-manpage-ltest">ltest</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/man/netkit-manpage-lab.conf">lab.conf</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/man/netkit-manpage-lab.dep">lab.dep</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/man/netkit-manpage-netkit.conf">netkit.conf</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/man/netkit-manpage-netkit">netkit</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Docs Site</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/website/start">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/website/doc">Writing Docs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/website/blog">Writing Blog Posts</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><div><span class="badge badge--secondary">Version: Next</span></div><header><h1 class="docTitle_Oumm">Adding New Configuration Options to netkit.conf</h1></header><div class="markdown"><p>When adding new configuration options to netkit.conf, adding the configuration option to netkit.conf is not sufficient. You must also add additional scripting to support updating user&#x27;s existing configurations on reinstall.</p><p>This process is completed inside the <code>netkit-jh-build/core/setup_scripts/handle_config.sh</code> script.</p><p>Let&#x27;s look at adding a new option <code>TUTORIAL_OPTION</code>. Firstly, we&#x27;ll update the netkit.conf file.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token shebang important">#!/bin/false</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># This script contains Netkit configuration parameters. It is not intended</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># for standalone usage.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Warning: none of the following parameters can include spaces in its value.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CONFIG_VERSION</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.cut</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">GRACE_TIME</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">                    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Wait the specified amount of time (in seconds)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># before starting the next virtual machine. This</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># is always enforced, but only useful when fast</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># (-f option of lstart) or parallel startup is</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># enabled.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">TUTORIAL_OPTION</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">123</span><span class="token plain">             </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># This is an example option which demonstrates how</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># we should add new options to the netkit configuration.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>We&#x27;ve appended our new option to the end of the document.</p><p>Now, we need to look at the <code>handle_config.sh</code> script. Notably, we can use the V1 -&gt; V2 upgrade as a template.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Upgrade from v1 to v2</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># This upgrade can be used as a template for new upgrades.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># - Ensures CONFIG_VERSION has been defined. Any config without CONFIG_VERSION is considered V1.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">${CURRENT_VERSION}</span><span class="token plain"> -lt </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">then</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Upgrading Netkit configuration to V2.&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Here, we can do anything else we&#x27;d want to do, for example, appending new options.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Finally, update the version.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CURRENT_VERSION</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">sed</span><span class="token plain"> -i </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;s/CONFIG_VERSION=1/CONFIG_VERSION=2/g&quot;</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">${NEW_DIR}</span><span class="token plain">/netkit.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">fi</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>As we&#x27;ve added a new option, we need to increment the CONFIG_VERSION to 3. This ensures that whenever a user installs a new version of Netkit-JH with an older config, the new options are added to their configuration.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>You only need to increment the CONFIG_VERSION if a new Netkit-JH version has been fully released since the last config version update. Otherwise, you can add your changes into the existing version increment. If you are unsure, increment the version anyways and it will be checked before your changes are merged into master. </p></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Upgrade from v2 to v3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># - Ensures TUTORIAL_OPTION has been defined.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">${CURRENT_VERSION}</span><span class="token plain"> -lt </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">then</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Upgrading Netkit configuration to V3.&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Finally, update the version.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CURRENT_VERSION</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">sed</span><span class="token plain"> -i </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;s/CONFIG_VERSION=2/CONFIG_VERSION=3/g&quot;</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">${NEW_DIR}</span><span class="token plain">/netkit.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">fi</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>We&#x27;ve copied the V1 -&gt; V2 section, replacing any instances of 2 with a 3, and any instances of a 1 with a 2. We can now look at actually updating the configuration now.</p><p>As we have a new option, we can simply append the string from in netkit.conf </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">TUTORIAL_OPTION=123             # This is an example option which demonstrates how</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">                                # we should add new options to the netkit configuration.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;&gt;</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">${NEW_DIR}</span><span class="token plain">/netkit.conf</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Let&#x27;s look at the entire update function together.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Upgrade from v2 to v3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># - Ensures TUTORIAL_OPTION has been defined.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">${CURRENT_VERSION}</span><span class="token plain"> -lt </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">then</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Upgrading Netkit configuration to V3.&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    TUTORIAL_OPTION=123             # This is an example option which demonstrates how</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">                                    # we should add new options to the netkit configuration.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;&gt;</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">${NEW_DIR}</span><span class="token plain">/netkit.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Finally, update the version.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CURRENT_VERSION</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">sed</span><span class="token plain"> -i </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;s/CONFIG_VERSION=2/CONFIG_VERSION=3/g&quot;</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">${NEW_DIR}</span><span class="token plain">/netkit.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">fi</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>That&#x27;s it! For new options, you will want to append a string to the end of the file. For removing options or modifying options, <code>sed -i</code> is your friend.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/netkit-jh/netkit-jh.github.io/edit/main/docs/dev/guides/addingnewconfigs.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/dev/guides/creatingtests"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Creating Netkit Test Labs</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/man/netkit-manpage-vclean"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">vclean - manpage Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/about">About Netkit</a></li><li class="footer__item"><a class="footer__link-item" href="/docs">Installing Netkit</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/netkit-jh/netkit-jh-build" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Netkit-JH Docs. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.dec56188.js"></script>
<script src="/runtime~main.d53829c8.js"></script>
<script src="/main.ff5f2e9f.js"></script>
<script src="/2.8d0b0d7f.js"></script>
<script src="/77.3f201193.js"></script>
<script src="/78.5acc5d18.js"></script>
<script src="/935f2afb.f24097cc.js"></script>
<script src="/76.d48e4612.js"></script>
<script src="/3ff4396f.14081895.js"></script>
</body>
</html>