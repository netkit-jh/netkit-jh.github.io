<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Netkit-JH Docs Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Netkit-JH Docs Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Netkit-JH Docs" href="/opensearch.xml"><title data-react-helmet="true">Using Tmuxinator with Netkit-JH | Netkit-JH Docs</title><meta data-react-helmet="true" property="og:title" content="Using Tmuxinator with Netkit-JH | Netkit-JH Docs"><meta data-react-helmet="true" name="description" content="Why is Tmuxinator Useful?"><meta data-react-helmet="true" property="og:description" content="Why is Tmuxinator Useful?"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:image" content="https://netkit-jh.github.io/img/DOTHIS"><meta data-react-helmet="true" name="twitter:image" content="https://netkit-jh.github.io/img/DOTHIS"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Using Tmuxinator with Netkit-JH"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/styles.0438dbfc.css">
<link rel="preload" href="/styles.123d721b.js" as="script">
<link rel="preload" href="/runtime~main.fc8c8fb9.js" as="script">
<link rel="preload" href="/main.4816c20e.js" as="script">
<link rel="preload" href="/2.2ae06de0.js" as="script">
<link rel="preload" href="/4.e9d5f574.js" as="script">
<link rel="preload" href="/ccc49370.7b64ddf3.js" as="script">
<link rel="preload" href="/172ccce2.8174d69e.js" as="script">
<link rel="preload" href="/b95d7107.e3fe31c6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="netkit-jh-logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="netkit-jh-logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Netkit-JH Docs</strong></a><a class="navbar__item navbar__link" href="/docs/">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/docs/">Next</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/">Next</a></li><li><a class="dropdown__link" href="/docs/1.0.0/">1.0.0</a></li></ul></div><a href="https://github.com/netkit-jh/netkit-jh-build" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><div class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></div></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="netkit-jh-logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="netkit-jh-logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Netkit-JH Docs</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Docs</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blog">Blog</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/1.0.0/">1.0.0</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/netkit-jh/netkit-jh-build" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_SWld thin-scrollbar"><h3 class="sidebarItemTitle_Km2m">Recent posts</h3><ul class="sidebarItemList_3UpA"><li class="sidebarItem_2T0D"><a aria-current="page" class="sidebarItemLink_v5H9 sidebarItemLinkActive_1anX" href="/blog/using-tmuxinator-with-netkit">Using Tmuxinator with Netkit-JH</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog/odetothesponge">An Ode to the Netkit-JH Sponge</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog/netkitv1release">Netkit Version 1.0 Released!</a></li></ul></div></div><main class="col col--8"><article><header><h1 class="margin-bottom--sm blogPostTitle_3-lP">Using Tmuxinator with Netkit-JH</h1><div class="margin-vert--md"><time datetime="2021-01-08T00:00:00.000Z" class="blogPostDate_Ta7i">January 8, 2021  Â· 8 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/b177y" target="_blank" rel="noreferrer noopener"><img src="https://avatars1.githubusercontent.com/u/34008579" alt="Billy Bromell"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/b177y" target="_blank" rel="noreferrer noopener">Billy Bromell</a></h4><small class="avatar__subtitle">Billy Bromell</small></div></div></header><section class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="why-is-tmuxinator-useful"></a>Why is Tmuxinator Useful?<a class="hash-link" href="#why-is-tmuxinator-useful" title="Direct link to heading">#</a></h2><p>With <code>tmuxinator</code> we can set up a &#x27;project&#x27;, so that when we are in a lab directory and we run <code>tmuxinator start LABNAME</code>, it will then run <code>lstart</code> for us, and open tmux panes and windows in a configuration we specify, which automatically connect to netkit machine tmux sessions when they are started.</p><p>Example:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ tmuxinator start abr</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Result:</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1shy tabs__item--active">lstart_window</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1shy">ab_window</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1shy">r_window</li></ul><div class="margin-vert--md"><div role="tabpanel"><img src="/assets/images/tmux_lstart_window-9b8f31024ad72db498560dc32c7dfd42.png" alt="Example banner"></div><div role="tabpanel" hidden=""><img src="/assets/images/tmux_ab_window-545908fd142443efac2b99e2c8a60180.png" alt="Example banner"></div><div role="tabpanel" hidden=""><img src="/assets/images/tmux_r_window-b6d78912a18f23c08512f5e80247d4fa.png" alt="Example banner"></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="installing"></a>Installing<a class="hash-link" href="#installing" title="Direct link to heading">#</a></h2><p>On Ubuntu 20.04 you can install <code>tmuxinator</code> with:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">apt</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> tmuxinator</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>You will also need tmux installed - take a look at the <a href="/docs/usingtmux">guide</a> for using tmux before using tmux!</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="create-a-tmuxinator-project"></a>Create a Tmuxinator &#x27;Project&#x27;<a class="hash-link" href="#create-a-tmuxinator-project" title="Direct link to heading">#</a></h2><p>For this I think it makes sense to have a local project - this will make a file called <code>.tmuxinator.yml</code> in your current working directory, instead of adding the project to a collection in <code>~/.config/tmuxinator</code>. If we do this in our lab directory, it means that if we share the lab or use source control such as git to track changes, the tmuxinator file will be there.</p><p>Let&#x27;s create a local project:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> abr</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ tmuxinator new --local abr </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># This can be named anything, but it makes sense to give it the same name as the netkit lab</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This will open a template yaml file in your default editor. If you want to edit this again later you can use <code>tmuxinator open --local abr</code>.</p><p>We can then start tmuxinator with:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ tmuxinator start abr</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Assuming we didn&#x27;t make any changes to the yaml file, this start a demo tmuxinator session, which isn&#x27;t very useful.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="setting-up-windows"></a>Setting Up Windows<a class="hash-link" href="#setting-up-windows" title="Direct link to heading">#</a></h2><p>We want tmuxinator to start the lab for us, so somewhere we&#x27;ll need to run lstart. For example we could do this on the first window.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> abr</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">root</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> . </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Change root to our current directory, as this is where we will start the lab from</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">windows</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">lstart_window</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">layout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> even</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">vertical</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">panes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> lstart </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">tmux</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">detached</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>With this simple config, you can start the lab by typing <code>tmuxinator start abr</code>. This will run <code>lstart --tmux-detached</code> in a window named <code>lstart_window</code>. It looks like the machines have started successfully, but it&#x27;s not very useful as we can&#x27;t see our machines. We want to add some panes to display the machines&#x27; tmux sessions.</p><p>We can add the following to the list of windows:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">ab_window</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">layout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> even</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">vertical</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">panes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> vconnect </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">m a </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">r 20 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">n 3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> vconnect </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">m b </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">r 20 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">n 3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">r_window</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">layout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> even</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">vertical</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">panes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> vconnect </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">m r </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">r 20 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">n 3</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This will add a window named &#x27;ab_window&#x27;, with two panes, one for machine a and one for b. It will also add a window named &#x27;r_window&#x27; with one pane - for machine r.</p><p>It attempts to connect to the machines by running <code>vconnect</code> in the panes, with the options to retry every 3 seconds for up to 20 attempts. This means you can run <code>tmuxinator start abr</code> and not worry about vconnect failing because it tries to connect before lstart has managed to start the machines.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If you are using lots of machines, remember that some of them could end up much longer than a minute from when <code>lstart</code> is run to when they are created, meaning vconnect will fail. You can either increase the retry count and interval for vconnect, or you can use vconnect manually when the machine has started.</p></div></div><p>Let&#x27;s try to start the lab now:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ tmuxinator start abr</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This should now start the lab, and if you cycle through the windows using <kbd>leader</kbd> then <kbd>n</kbd>, you&#x27;ll see that there is a window for lstart (just a normal shell when lstart has finished running), a window with machines a and b, and a window with machine r.</p><p>The <code>.tmuxinator.yml</code> file as a whole now looks like this (with a few additions that I thought would be useful). You can use this as a template when creating tmuxinator labs.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ./.tmuxinator.yml</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> abr</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">root</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> .</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">tmux_options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">f ~/.config/tmux/tmux.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">on_project_stop</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> lcrash</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">windows</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">lstart_window</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">layout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> even</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">vertical</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">panes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> lstart </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">tmux</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">detached</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">ab_window</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">layout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> even</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">vertical</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">panes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> vconnect </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">m a </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">r 20 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">n 3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> vconnect </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">m b </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">r 20 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">n 3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">r_window</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">layout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> even</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">vertical</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">panes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> vconnect </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">m r </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">r 20 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">n 3</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="advanced"></a>Advanced<a class="hash-link" href="#advanced" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="layouts"></a>Layouts<a class="hash-link" href="#layouts" title="Direct link to heading">#</a></h3><p>There are 5 available layouts. Here are the descriptions from the tmux man pages:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">even-horizontal</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     Panes are spread out evenly from left to right across the window.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">even-vertical</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     Panes are spread evenly from top to bottom.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">main-horizontal</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     A large (main) pane is shown at the top of the window and the remaining panes are</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     spread from left to right in the leftover space at the bottom.  Use the</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     main-pane-height window option to specify the height of the top pane.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">main-vertical</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     Similar to main-horizontal but the large pane is placed on the left and the others</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     spread from top to bottom along the right.  See the main-pane-width window option.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">tiled</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     Panes are spread out as evenly as possible over the window in both rows and columns.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>To visualise this, there are some good diagrams and explanations <a href="https://leanpub.com/the-tao-of-tmux/read#window-layouts" target="_blank" rel="noopener noreferrer">here</a>. You can additionally set the layout to something custom. The easiest way to make a custom layout is to start tmuxinator with one of the built in layouts, then manually resize and shuffle panes as you wish, then run <code>tmux list-windows</code> in that tmux session. You should then get a list of windows with their current layouts, which you can copy and use in your <code>.tmuxinator.yml</code> - as shown in <a href="https://thoughtbot.com/blog/templating-tmux-with-tmuxinator" target="_blank" rel="noopener noreferrer">this guide</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="changing-the-startup-window-and-pane"></a>Changing the Startup Window and Pane<a class="hash-link" href="#changing-the-startup-window-and-pane" title="Direct link to heading">#</a></h3><p>By default, tmuxinator will attach you to the first pane of the first window. You can change that with</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">startup_window</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ab_window</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">startup_pane</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This example would connect you to the pane for machine b when you run <code>tmuxinator start abr</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="nesting-sessions"></a>Nesting Sessions<a class="hash-link" href="#nesting-sessions" title="Direct link to heading">#</a></h3><p>You need to remember when you nest sessions, that the outer session will intercept key presses first, and process them before they are passed to the next inner layer. This means if you had the same leader key for an outer session and an inner session, you would have to hit the leader key twice in a row to send commands to the inner session. This can get very annoying, so it is recommended to use a different leader key for each layer of nesting. Using tmuxinator with netkit will give you at least two layers - as you have the main session - created with tmuxinator, which has panes that are attached to sessions which are created for the Netkit machines.</p><p>By default, the netkit machine sessions will use a leader key of <kbd>ctrl</kbd> + <kbd>d</kbd>. If you use the same leader key in your tmux config, this will conflict and it is recommended to change it! If you haven&#x27;t changed your tmux config , the leader key will be <kbd>ctrl</kbd> + <kbd>b</kbd> - so you don&#x27;t need to worry about this.</p><p>In theory you can nest multiple layers of sessions - for example here I have a tmux session on my host, with a pane SSHd into an Ubuntu VM, which has a tmux session started by tmuxinator. The tmuxinator session is attached to netkit machine sessions, and one of the netkit machines (a) has its own tmux session open. In general it&#x27;s recommended to keep it simple, especially if you are starting out with tmux, but if you want to try more complex sessions, make sure you use different leader keys for each layer!</p><p><img alt="Nested Tmux Sessions" src="/assets/images/tmux_screenshot_nested-cacaf4cb26d6f9b942aec7920696bb46.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="extra"></a>Extra<a class="hash-link" href="#extra" title="Direct link to heading">#</a></h3><p>For more info on using tmuxinator, the readme on their GitHub repo <a href="https://github.com/tmuxinator/tmuxinator" target="_blank" rel="noopener noreferrer">here</a> contains documentation. Tmuxinator is quite simple so there isn&#x27;t much more to cover. If you want to increase your productivity I would suggest learning more about tmux. Here are some resources for learning more about tmux:</p><ul><li>Daniel Miessler - Tactical Tmux <a href="https://danielmiessler.com/study/tmux/" target="_blank" rel="noopener noreferrer">link</a></li><li>The Valuable Dev - A Detailed tmux Walkthrough to Boost Your Productivity <a href="https://thevaluable.dev/tmux-boost-productivity-terminal/" target="_blank" rel="noopener noreferrer">link</a></li><li>Tony Narlock - The Tao of Tmux <a href="https://leanpub.com/the-tao-of-tmux/read" target="_blank" rel="noopener noreferrer">link</a></li></ul></section></article><div><a href="https://github.com/netkit-jh/netkit-jh.github.io/edit/main/blog/blog/2021-01-08-tmuxinator.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/odetothesponge"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">An Ode to the Netkit-JH Sponge Â»</div></a></div></nav></div></main><div class="col col--2"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-is-tmuxinator-useful" class="table-of-contents__link">Why is Tmuxinator Useful?</a></li><li><a href="#installing" class="table-of-contents__link">Installing</a></li><li><a href="#create-a-tmuxinator-project" class="table-of-contents__link">Create a Tmuxinator &#39;Project&#39;</a></li><li><a href="#setting-up-windows" class="table-of-contents__link">Setting Up Windows</a></li><li><a href="#advanced" class="table-of-contents__link">Advanced</a><ul><li><a href="#layouts" class="table-of-contents__link">Layouts</a></li><li><a href="#changing-the-startup-window-and-pane" class="table-of-contents__link">Changing the Startup Window and Pane</a></li><li><a href="#nesting-sessions" class="table-of-contents__link">Nesting Sessions</a></li><li><a href="#extra" class="table-of-contents__link">Extra</a></li></ul></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/about">About Netkit</a></li><li class="footer__item"><a class="footer__link-item" href="/docs">Installing Netkit</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/netkit-jh/netkit-jh-build" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Netkit-JH Docs. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.123d721b.js"></script>
<script src="/runtime~main.fc8c8fb9.js"></script>
<script src="/main.4816c20e.js"></script>
<script src="/2.2ae06de0.js"></script>
<script src="/4.e9d5f574.js"></script>
<script src="/ccc49370.7b64ddf3.js"></script>
<script src="/172ccce2.8174d69e.js"></script>
<script src="/b95d7107.e3fe31c6.js"></script>
</body>
</html>